(this.webpackJsonpwhere_is_it_app=this.webpackJsonpwhere_is_it_app||[]).push([[0],{220:function(e,t){},222:function(e,t){},235:function(e,t){},237:function(e,t){},265:function(e,t){},266:function(e,t){},271:function(e,t){},273:function(e,t){},280:function(e,t){},299:function(e,t){},355:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(12),i=n.n(o),c=n(14),s=n(195),l=function(){return s.sign({app:"customer",name:"whereisitapp",date:Date.now()},"whereisitcustomerapp")},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)({lat:0,lng:0}),n=Object(c.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(),s=Object(c.a)(i,2),l=s[0],u=s[1],d=Object(a.useRef)(),m=function(e){console.log("Latitude: "+e.coords.latitude.toPrecision(21)+" Longitude: "+e.coords.longitude.toPrecision(21)+" Accuracy: "+e.coords.accuracy),o({lat:e.coords.latitude,lng:e.coords.longitude})},f=function(e){u(e.message)},j=function(){d.current&&navigator.geolocation&&navigator.geolocation.clearWatch(d.current)};return Object(a.useEffect)((function(){return navigator.geolocation?d.current=navigator.geolocation.watchPosition(m,f,e):alert("It can't handle geo location"),j}),[e]),{center:r,cancelLocationWatch:j,error:l}},d=n(117),m=n.n(d),f=n(196),j=n(197),g=n(198),b=n.n(g).a.create({baseURL:"https://api.mapbox.com/directions/v5/mapbox/"}),p=function(e){var t=[];return e.coordinates.forEach((function(e){t.push([e[1],e[0]])})),{type:e.type,coordinates:t}},h=function(e){return{bearing_after:e.bearing_after,bearing_before:e.bearing_before,location:[e.location[1],e.location[0]],instruction:e.instruction,type:e.type,modifier:e.modifier}},O=function(e){var t=[];return e.forEach((function(e){t.push({driving_side:e.driving_side,destinations:e.destinations,mode:e.mode,duration:e.duration,name:e.name,distance:e.distance,maneuver:h(e.maneuver),geometry:p(e.geometry)})})),t},x=function(e){var t=[];return e.forEach((function(e){t.push({summary:e.summary,distance:e.distance,duration:e.distance,steps:O(e.steps)})})),t},v=function(e){var t=[];return e.forEach((function(e){t.push({duration:e.duration,distance:e.distance,legs:x(e.legs),geometry:p(e.geometry)})})),t},y=function(e){var t=[];return e.forEach((function(e){t.push({distance:e.distance,location:[e.location[1],e.location[0]],name:e.name})})),t},S=Object({NODE_ENV:"production",PUBLIC_URL:"/where_is_it_app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MAPBOX_TOKEN,w=function e(t){var n,a=!1;if(void 0!==(n=t).lat&&void 0!==n.lng)a=0!==t.lng&&0!==t.lat;else{var r,o=Object(j.a)(t);try{for(o.s();!(r=o.n()).done;){a=e(r.value)}}catch(i){o.e(i)}finally{o.f()}}return a},k=function(e){var t=e.target,n=e.departure,r=e.alternatives,o=e.steps,i=e.profile,s=Object(a.useState)(),l=Object(c.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)(),g=Object(c.a)(j,2),p=g[0],h=g[1],O=Object(a.useState)(),x=Object(c.a)(O,2),k=x[0],z=x[1];return Object(a.useEffect)((function(){if(w(n)&&w(t)){var e=function(e,t){var n=["".concat(e.lng,"%2C").concat(e.lat)];return t.map((function(e){return n.push("".concat(e.lng,"%2C").concat(e.lat))})),n.join("%3B")}(n,t);z(e)}}),[n,t]),Object(a.useEffect)((function(){k&&h("".concat(i,"/").concat(k,"?alternatives=").concat(r,"&geometries=geojson&steps=").concat(o,"&bearings=60,45;45,45&overview=full&access_token=").concat(S))}),[k,r,i,o]),Object(a.useEffect)((function(){p&&function(){var e=Object(f.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.get(p);case 3:t=e.sent,n=t.data,(a=t.status)&&200===a&&d({routes:v(n.routes),waypoints:y(n.waypoints)}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[p]),u},z=n(118),M=n(393),N=n(395),C=n(26),E=n(396),_=n(427),I=n(397),T=n(23),P=n.n(T),A=n(388),D=n(389),F=n(2),L=function(e){var t=e.position,n=e.icon,r=e.name,o=e.description;return Object(a.useMemo)((function(){return Object(F.jsx)(A.a,{position:t,icon:n,children:Object(F.jsx)(D.a,{children:Object(F.jsxs)("div",{children:[r||"A pretty CSS3 popup."," ",Object(F.jsx)("br",{})," ",o||"Easily customizable","."]})})})}),[o,n,r,t])},R=Object(a.memo)(L),B=n(32),W=n(390),X=n(425),H=n(391);var K,Y=(K={},Object(W.a)(Object(B.a)({palette:{grayscale:{dark:"#000000",main:"#4c4c4c",light:"#ffffff"}}},K)));Y=Object(X.a)(Y);var Z,q=Object(H.a)({mapStyle:{width:"100%",height:"100vh",position:"relative"},customMarker:{position:"absolute",color:Y.palette.warning.main,top:"-200%",left:"-100%",width:"2.3rem",height:"2.3rem"},navigationIcon:{margin:"0 0.5rem"},dashboardStyle:{boxShadow:"0 1px 3px 2px ".concat(Y.palette.grayscale.main),color:Y.palette.grayscale.light,background:Y.palette.grayscale.dark,opacity:"85%",borderRadius:"6px",padding:"0.5rem",zIndex:500,position:"absolute"}}),U=function(e){var t=e.places,n=e.zoom,r=e.center,o=e.direction,i=q(),c=Object(C.a)().palette,s=Object(a.useRef)(),l=Object(a.useMemo)((function(){return P.a.divIcon({html:Object(z.renderToStaticMarkup)(Object(F.jsx)(M.a,{className:i.customMarker,style:{color:c.primary.main}})),popupAnchor:[2,-28]})}),[i.customMarker,c.primary.main]),u=Object(a.useMemo)((function(){return P.a.divIcon({html:Object(z.renderToStaticMarkup)(Object(F.jsx)(N.a,{className:i.customMarker})),popupAnchor:[2,-28]})}),[i.customMarker]);return Object(a.useEffect)((function(){s.current&&s.current.setView(r,n)}),[r,n]),Object(F.jsx)("div",{className:i.mapStyle,style:{margin:"-8px"},children:Object(F.jsxs)(E.a,{zoom:n,className:i.mapStyle,zoomAnimation:!0,scrollWheelZoom:!0,zoomControl:!1,whenCreated:function(e){return s.current=e},children:[Object(F.jsx)(_.a,{attribution:'Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",id:"mapbox/streets-v11",accessToken:S,tileSize:512,zoomOffset:-1}),r&&Object(F.jsx)(R,{position:r,icon:l}),t&&t.map((function(e,t){return Object(F.jsx)(R,{position:e.coordinate,icon:u},t)})),o&&o.length>0&&Object(F.jsx)(I.a,{pathOptions:{color:c.error.main,weight:5},positions:o})]})})},J=Object(a.memo)(U),V=[{coordinate:{lat:25.684283415043094,lng:-80.41913012972027},name:"Publix Super Market at Higate Square"},{coordinate:{lat:25.672061446129067,lng:-80.4312322559634},name:"Fresco y M\xe1s"},{coordinate:{lat:25.683939172142516,lng:-80.43275405895899},name:"Festival Supermarket"},{coordinate:{lat:25.714857552456085,lng:-80.39435588386571},name:"El Ranchito Marketplace"},{coordinate:{lat:25.713024753573123,lng:-80.4330950291638},name:"Presidente Supermarket"},{coordinate:{lat:25.715601288890685,lng:-80.43029425388335},name:"Sedano's Supermarket"},{coordinate:{lat:25.69125971191103,lng:-80.3877791296447},name:"Publix Super Market at Kendall Town & Country"},{coordinate:{lat:25.68687493692666,lng:-80.40242022778254},name:"Puerto Madero Miami"}];!function(e){e.driving="driving",e.cycling="cycling",e.walking="walking",e.drivingTraffic="driving-traffic"}(Z||(Z={}));var G,$,Q,ee,te,ne=n(29),ae=n(30),re=n(399),oe=n(422),ie=(ae.b.div(G||(G=Object(ne.a)(["\n  background: ",";\n  text-align: center;\n  height: 94vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  padding: 1rem;\n"])),(function(e){return e.theme.palette.warning.main})),function(e){var t=e.error;Object(C.a)();return Object(F.jsxs)(oe.a,{severity:"warning",style:{position:"absolute",zIndex:500,top:"20px",left:"20px"},children:[Object(F.jsx)(re.a,{children:"Warning"}),t," \u2014 ",Object(F.jsx)("strong",{children:"You should activate the GPS in order to help you find what you are looking for!"})]})}),ce=Object(a.memo)(ie),se=n(400),le=n(401),ue=ae.b.div($||($=Object(ne.a)(["\n  right: 25px;\n  bottom: 50px;\n  margin: 1rem 1rem;\n  width: 40px;\n  height: 70px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n  cursor: pointer;\n"]))),de=function(e){var t=e.currentZoom,n=e.onChangeZoom,a=q().dashboardStyle;return Object(F.jsxs)(ue,{className:a,children:[Object(F.jsx)(se.a,{onClick:function(){return t<18&&n(++t)}}),Object(F.jsx)(le.a,{onClick:function(){return t>12&&n(--t)}})]})},me=Object(a.memo)(de),fe=n(421),je=n(403),ge=n(404),be=ae.b.div(Q||(Q=Object(ne.a)(["\n  right: 25px;\n  top: 90px;\n  margin: 1rem 1rem;\n  width: 260px;\n\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  z-index: 500;\n  position: absolute;\n\n  .MuiInputBase-input {\n    color: ",";\n    font-size: large;\n  }\n\n  .MuiFormLabel-root {\n    font-size: 1rem;\n  }\n\n  .MuiFormLabel-root.Mui-focused {\n    color: ",";\n  }\n"])),(function(e){return e.theme.palette.grayscale.dark}),(function(e){return e.theme.palette.warning.main})),pe=Object(ae.b)(fe.a)(ee||(ee=Object(ne.a)(["\n  width: 100%;\n  margin-bottom: 1rem;\n"]))),he=function(e){var t=e.onSetTarget,n=q().dashboardStyle,a=Object(C.a)();return Object(F.jsxs)(be,{theme:a,children:[Object(F.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(F.jsx)(pe,{id:"lat",label:"Latitude",variant:"filled"}),Object(F.jsx)(pe,{id:"lng",label:"Longitude",variant:"filled"})]}),Object(F.jsx)(je.a,{variant:"contained",color:"default",startIcon:Object(F.jsx)(ge.a,{}),className:n,style:{color:a.palette.grayscale.light,background:a.palette.grayscale.dark,opacity:"85%",borderRadius:"6px",padding:"0.5rem",height:"130px",margin:"0 0 1rem 0.5rem",minWidth:"2rem",position:"relative"},onClick:function(e){e.preventDefault();var n=document.getElementById("lat").value,a=document.getElementById("lng").value;t({lat:n,lng:a})}})]})},Oe=Object(a.memo)(he),xe=n(415),ve=n(72),ye=n(416),Se=n(405),we=n(406),ke=n(407),ze=n(408),Me=n(409),Ne=n(410),Ce=n(411),Ee=n(412),_e=n(413),Ie=n(414),Te=function(e){var t=e.type,n=e.modifier,a=e.iconCssClass;if("arrive"===t)return Object(F.jsx)(Se.a,{className:a,fontSize:"large"});if("depart"===t)return Object(F.jsx)(we.a,{className:a,fontSize:"large"});if("end of road"===t)return"left"===n?Object(F.jsx)(ke.a,{className:a,style:{transform:"rotateX(180deg)"},fontSize:"large"}):"right"===n?Object(F.jsx)(ze.a,{className:a,style:{transform:"rotateX(180deg)"},fontSize:"large"}):Object(F.jsx)(Me.a,{className:a,fontSize:"large"});if("on ramp"===t)return"left"===n?Object(F.jsx)(ke.a,{className:a,style:{transform:"rotateX(180deg)"},fontSize:"large"}):"right"===n?Object(F.jsx)(ze.a,{className:a,style:{transform:"rotateX(180deg)"},fontSize:"large"}):"slight right"===n?Object(F.jsx)(Ne.a,{className:a,fontSize:"large"}):Object(F.jsx)(Ne.a,{className:a,style:{transform:"rotateY(180deg)"},fontSize:"large"});if("turn"===t)return"right"===n?Object(F.jsx)(ze.a,{className:a,style:{transform:"rotateX(180deg)"},fontSize:"large"}):"slight right"===n?Object(F.jsx)(Ne.a,{className:a,fontSize:"large"}):"left"===n?Object(F.jsx)(ke.a,{className:a,style:{transform:"rotateX(180deg)"},fontSize:"large"}):Object(F.jsx)(Ne.a,{className:a,style:{transform:"rotateY(180deg)"},fontSize:"large"});if("off ramp"===t)return"slight right"===n?Object(F.jsx)(Ne.a,{className:a,fontSize:"large"}):Object(F.jsx)(Ne.a,{className:a,style:{transform:"rotateY(180deg)"},fontSize:"large"});if("fork"===t)return"slight right"===n?Object(F.jsx)(Ne.a,{className:a,fontSize:"large"}):Object(F.jsx)(Ne.a,{className:a,style:{transform:"rotateY(180deg)"},fontSize:"large"});if("roundabout"===t){if("slight right"===n||"right"===n)return Object(F.jsx)(Ce.a,{className:a,fontSize:"large"});if("slight left"===n||"left"===n)return Object(F.jsx)(Ee.a,{className:a,fontSize:"large"});if("straight"===n)return Object(F.jsx)(_e.a,{className:a,fontSize:"large"})}else{if("continue"!==t)return Object(F.jsx)(Ie.a,{className:a,fontSize:"large"});if("left"===n)return Object(F.jsx)(ke.a,{className:a,style:{transform:"rotateX(180deg)"},fontSize:"large"});if("right"===n)return Object(F.jsx)(ze.a,{className:a,style:{transform:"rotateX(180deg)"},fontSize:"large"})}},Pe=ae.b.div(te||(te=Object(ne.a)(["\n  right: 25px;\n  margin: 1rem 1rem;\n  width: 260px;\n  max-height: 60px;\n  min-height: 40px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n"]))),Ae=function(e){var t=e.navigation,n=e.onClickBox,a=Object(C.a)(),r=q(),o=r.navigationIcon,i=r.dashboardStyle;return Object(F.jsx)(Pe,{theme:a,className:i,onClick:n,children:t?Object(F.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[Object(F.jsx)(xe.a,{fontSize:"small",style:{margin:"0 0.5rem"}}),Object(F.jsxs)("div",{children:[Object(F.jsx)(ve.a,{variant:"body2",children:t.instruction}),Object(F.jsx)(ve.a,{variant:"caption",style:{color:a.palette.grayscale.main},children:function(e,t){var n=[];return e&&n.push(e),t&&n.push(t),n.join("\n")}(t.name,t.destination)})]}),Te({type:t.type,modifier:t.modifier,iconCssClass:o})]}):Object(F.jsx)(ye.a,{disableShrink:!0,style:{color:"white"},size:25})})},De=Object(a.memo)(Ae),Fe=n(424),Le=n(402),Re=n(417),Be=n(418),We=n(426),Xe=n(419),He=function(e){var t=e.open,n=e.onDrawerClose,a=e.route,r=q().navigationIcon,o=function(e){var t=[];return e.name&&t.push(e.name),e.destinations&&t.push(e.destinations),t.join("\n")};return Object(F.jsx)(Fe.a,{anchor:"right",open:t,onClose:n,children:Object(F.jsx)(Le.a,{children:a&&a.legs[0].steps.map((function(e,t){return Object(F.jsxs)(Re.a,{alignItems:"flex-start",children:[Object(F.jsx)(Be.a,{children:Object(F.jsx)(We.a,{style:{backgroundColor:"transparent"},children:Te({type:e.maneuver.type,modifier:e.maneuver.modifier,iconCssClass:r})})}),Object(F.jsx)(Xe.a,{primary:e.maneuver.instruction,secondary:o(e)})]},t)}))})})},Ke=Object(a.memo)(He);function Ye(e){return e*Math.PI/180}var Ze=function(e,t,n,a){var r=Ye(n-e),o=Ye(a-t),i=Ye(e),c=Ye(n),s=Math.sin(r/2)*Math.sin(r/2)+Math.sin(o/2)*Math.sin(o/2)*Math.cos(i)*Math.cos(c);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))*1e3},qe=function(e){var t=e.direction,n=e.location,r=Object(a.useState)(),o=Object(c.a)(r,2),i=o[0],s=o[1],l=Object(a.useState)(),u=Object(c.a)(l,2),d=u[0],m=u[1],f=Object(a.useState)(!1),j=Object(c.a)(f,2),g=j[0],b=j[1],p=Object(a.useCallback)((function(){b(!g)}),[g]);return Object(a.useEffect)((function(){null===t||void 0===t||t.routes[0].legs[0].steps.forEach((function(e,t){var a=0;e.geometry.coordinates.forEach((function(e){a=Ze(n.lat,n.lng,e[0],e[1]),console.log("DISTANCE IN METERS INSIDE LOOP: ",parseInt(a.toFixed(2))),parseInt(a.toFixed(2))<30&&s(t)}))}))}),[null===t||void 0===t?void 0:t.routes,n.lat,n.lng]),Object(a.useEffect)((function(){void 0!==i&&m({type:null===t||void 0===t?void 0:t.routes[0].legs[0].steps[i].maneuver.type,modifier:null===t||void 0===t?void 0:t.routes[0].legs[0].steps[i].maneuver.modifier,instruction:null===t||void 0===t?void 0:t.routes[0].legs[0].steps[i].maneuver.instruction,name:null===t||void 0===t?void 0:t.routes[0].legs[0].steps[i].name,destination:null===t||void 0===t?void 0:t.routes[0].legs[0].steps[i].destinations})}),[i,null===t||void 0===t?void 0:t.routes]),Object(F.jsxs)(F.Fragment,{children:[d&&Object(F.jsx)(De,{navigation:d,onClickBox:p}),Object(F.jsx)(Ke,{open:g,onDrawerClose:p,route:null===t||void 0===t?void 0:t.routes[0]})]})},Ue=Object(a.memo)(qe),Je=function(){var e=Object(a.useState)(V),t=Object(c.a)(e,2),n=t[0],r=(t[1],Object(a.useState)([{lat:25.69125971191103,lng:-80.3877791296447}])),o=Object(c.a)(r,2),i=o[0],s=o[1],l=Object(a.useState)(15),d=Object(c.a)(l,2),m=d[0],f=d[1],j=Object(a.useState)(Z.driving),g=Object(c.a)(j,2),b=g[0],p=(g[1],u({enableHighAccuracy:!0,timeout:1e3,maximumAge:864e5})),h=p.center,O=p.cancelLocationWatch,x=p.error,v=k({profile:b,departure:h,target:i,steps:!0,alternatives:!1}),y=Object(a.useCallback)((function(e){console.log(e),f(e)}),[]),S=Object(a.useCallback)((function(e){var t=[];e.lat&&e.lng&&(t.push(e),s(t))}),[]);return Object(a.useEffect)((function(){(h.lat||h.lng)&&setTimeout((function(){O()}),6e3)}),[h,O,x]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Ue,{direction:v,location:h}),Object(F.jsx)(J,{places:n,zoom:m,center:h,direction:null===v||void 0===v?void 0:v.routes[0].geometry.coordinates}),Object(F.jsx)(me,{currentZoom:m,onChangeZoom:y}),x&&Object(F.jsx)(ce,{error:x}),Object(F.jsx)(Oe,{onSetTarget:S})]})};var Ve=function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=(t[0],t[1]);return Object(a.useEffect)((function(){n(l)}),[]),Object(F.jsx)("div",{className:"App",children:Object(F.jsx)("header",{className:"App-header",children:Object(F.jsx)(Je,{})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ge,$e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,429)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),o(e),i(e)}))},Qe=n(420),et=Object(ae.a)(Ge||(Ge=Object(ne.a)(["\n  .leaflet-div-icon {\n    background:transparent;\n    border: none;\n  }\n\n  .MuiDrawer-paper{\n    background: ",";\n    color: ",";\n    opacity: 90%;\n    width: 18rem;\n    box-shadow: 0 1px 2px 1px ",";\n  }\n  .MuiTypography-colorTextSecondary {\n    color: ",";\n  }\n"])),Y.palette.grayscale.dark,Y.palette.grayscale.light,Y.palette.grayscale.dark,Y.palette.grayscale.main);n(354);i.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsxs)(Qe.a,{theme:Y,children:[Object(F.jsx)(Ve,{}),Object(F.jsx)(et,{})]})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),$e()}},[[355,1,2]]]);
//# sourceMappingURL=main.dcbbbdcf.chunk.js.map